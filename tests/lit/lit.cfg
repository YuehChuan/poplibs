# -*- Python -*-

import lit.formats
import os

if not "test_dir" in lit_config.params:
    raise Exception('test_dir not set on command line, please re-run lit, eg "gc-lit VertexValidation.cpp --param test_dir=. -v')

config.name = 'poplibs'
config.test_format = lit.formats.ShTest()
config.test_exec_root = lit_config.params["test_dir"]

# lit sensibly does not inherit the parent process's environment, but
# unfortunately our tests require a lot of environment variables so copy
# them here.
config.environment = os.environ

# On Mac due to System Integrity Protection, DYLD_LIBRARY_PATH is often not
# inherited from parent processes so we need to set it again here.
# LIBRARY_PATH should have the same value. On other OSes this is harmless.
config.environment['DYLD_LIBRARY_PATH'] = os.environ['LIBRARY_PATH']
